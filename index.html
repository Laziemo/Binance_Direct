
<html>
<head>
<style>
body{
  background-color:  rgb(23,23,40) ;
}
</style>
<canvas id="nba"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

<script>
let ctx = document.getElementById('nba').getContext('2d');
Chart.defaults.global.defaultFontFamily = 'Courier';
Chart.defaults.global.defaultFontColor = 'rgb(253, 255, 223)';

let chart = new Chart(ctx, {
    // The type of chart we want to create
    type: 'line',
    // The data for our dataset
    data: {
        labels: [],
        datasets: [{
            label: "BTC/USDT",
            borderColor: 'rgb(242, 233, 33)',
            pointRadius: 5,
            pointBorderColor: 'rgb( 33, 214, 242 )',
            pointBorderWidth: 2,
            pointHoverRadius: 11,
            pointHoverBackgroundColor: 'rgb( 189, 240, 233, 0.5)',
            data: [],
        }]
    },
    // Configuration options go here
    options: {
        scales: {
            yAxes: [{
                scaleLabel:{
                  display:true,
                  labelString: "USDT",
                  fontColor: 'rgb( 33, 214, 242 )',
                  fontSize: 21
                }
            }],
            xAxes: [{
                scaleLabel:{
                  display:true,
                  labelString: "time",
                  fontColor: 'rgb( 33, 214, 242 )',
                  fontSize: 21
                }
            }]
        },
        title: {
            display: true,
            text: 'Live Binance Market Monitor',
            fontColor: 'rgb( 251, 254, 194 )',
            fontFamily: "Courier",
            fontSize: 27

        }
    }
});

let addData=(chart, label, data)=>{
    chart.data.labels.push(label);
    chart.data.datasets.forEach((dataset) => {
        dataset.data.push(data);
    });
    chart.update();
}

</script>

</head>

   <script src = "/socket.io/socket.io.js"></script>

   <script>
      let socket = io.connect('http://localhost:8989');
      socket.on('price_set', (data)=>{
        addData(chart,data.time,data.price);
        //alert(`Logging from html document: ${data.time}: ${data.price}`);
      });
   </script>

<body>

</body>
</html>
